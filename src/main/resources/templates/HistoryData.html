<!DOCTYPE html>
<html lang="zh" xmlns="http://www.w3.org/1999/html">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>后端分页</title>
    <link href="/css/icon.css" type="text/css" rel="stylesheet">
    <link href="/css/myStyle.css" type="text/css" rel="stylesheet">
    <link href="/css/myStyle1.css" type="text/css" rel="stylesheet">
    <link href="/css/myStyle2.css" type="text/css" rel="stylesheet">
    <link href="/css/materialdesignicons.min.css" rel="stylesheet">
    <!--时间选择插件-->
    <!--日期选择插件-->
    <link rel="stylesheet" href="/css/bootstrap-datepicker.css">
    <link href="/css/style.min.css" rel="stylesheet">
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script type="text/javascript" src="/js/main.min.js"></script>
    <script type="text/javascript" src="/js/moment.min.js"></script>
    <script type="text/javascript" src="/js/bootstrap.min.js"></script>
    <!--时间选择器-->
    <script type="text/javascript" src="/js/zh-cn.js"></script>
    <!--日期选择器-->
    <script type="text/javascript" src="/js/bootstrap-datepicker.min.js"></script>
    <script type="text/javascript" src="/js/bootstrap-datepicker.zh-CN.min.js"></script>
    <script>
        var zoneId;
        var num;
        var startTime;
        var endTime;
        $(document).load('click', "#historyData", function () {
            hd_searchAllPart();
        });

        function hd_drop_down_event(value) {
            document.getElementById("hd_part1_1_1").style.display = "none";
            document.getElementById("hd_part1_1_2").style.display = "none";
            document.getElementById("hd_part1_1_3").style.display = "none";
            document.getElementById("hd_part1_1_4").style.display = "none";
            if (value === "weekQuery") {
                document.getElementById("hd_part1_1_1").style.display = "";
            } else if (value === "monthQuery") {
                document.getElementById("hd_part1_1_2").style.display = "";
            } else if (value === "yearQuery") {
                document.getElementById("hd_part1_1_3").style.display = "";
            } else if (value === "ownQuery") {
                document.getElementById("hd_part1_1_4").style.display = "";

            }

        }

        function hd_searchAllPart() {
            part1Chart_hd();
        }

        function part1Chart_hd() {
            inputAssignment();
            var selectObject = document.getElementById("hd_select");
            var selectValue = selectObject.options[selectObject.selectedIndex].value;
            console.log(selectValue);
            var urlString;
            if (selectValue === 'weekQuery') {
                urlString = "/historyData/queryByWeek.do";
                num = $('#hd_part1_1_1_input').val();
            } else if (selectValue === 'monthQuery') {
                urlString = "/historyData/queryByMonth.do";
                num = $('#hd_part1_1_2_input').val();
            } else if (selectValue === 'yearQuery') {
                urlString = "/historyData/queryByYear.do";
                num = $('#hd_part1_1_3_input').val();
            } else if (selectValue === 'ownQuery') {
                urlString = "/historyData/queryByUserDefined.do";
                startTime = $("#hd_part1_1_4_startTime").val();
                endTime = $("#hd_part1_1_4_endTime").val();
                console.log(startTime);
                console.log(endTime);
                if (startTime === "" || endTime === "" || startTime > endTime) {
                    alert("日期输入错误");
                    return;
                }
            } else {
                urlString = "/historyData/queryByWeek.do";
                num = $('#hd_part1_1_1_input').val();
            }

            $.ajax({
                url: urlString,
                type: "post",
                dataType: "json",
                data: {"zoneId": zoneId, "num": num, "startTime": startTime, "endTime": endTime},
                success: function (data) {
                    fillPart1_hd(data);
                },
                error: function (msg) {
                    alert("ajax连接异常：" + msg);
                }
            });

        }

        //填充数据第一部分
        function fillPart1_hd(data) {
            var myChart = echarts.init(document.getElementById('hd_part1_2'));
            var option = {
                grid: {
                    left: 60,
                    right: 60,
                    height: '60%',
                    bottom: 45
                },
                title: {
                    text: ""
                },
                tooltip: {},
                legend: {
                    top: 10,
                    data: ['水温', 'PH', '耗氧量', '氨氮', '溶解氧', '电导率', '浊度'],
                    selected: {
                        'PH': false,
                        '耗氧量': false,
                        '氨氮': false,
                        '溶解氧': false,
                        '电导率': false,
                        '浊度': false
                    }
                },
                xAxis: {
                    data: ["0", "1", "2", "3", "4", "5",
                        "6", "7", "8", "9", "10", "11",
                        "12", "13", "14", "15", "16", "17",
                        "18", "19", "20", "21", "22", "23"]
                },
                yAxis: {},
                series: [{
                    name: '水温',
                    type: 'line',
                    data: 1
                }, {
                    name: 'PH',
                    type: 'line',
                    data: 2
                }, {
                    name: '耗氧量',
                    type: 'line',
                    data: 3
                }, {
                    name: '氨氮',
                    type: 'line',
                    data: 4
                }, {
                    name: '溶解氧',
                    type: 'line',
                    data: 56
                }, {
                    name: '电导率',
                    type: 'line',
                    data: 5
                }, {
                    name: '浊度',
                    type: 'line',
                    data: 4
                }]
            };
            // 使用刚指定的配置项和数据显示图表。
            myChart.setOption(option);
        }

        function inputAssignment() {
            if ($('#searchText_hd').val() == null || $('#searchText_hd').val() == '') {
                zoneId = 1;
            } else {
                zoneId = $('#searchText_hd').val();
            }
        }

    </script>
</head>
<body>
<div class="hd_card1" id="part1">
    <div class="hd_mySearch" id="hd_part1_1">
        <input type="text" placeholder="输入区域号" id="searchText_hd">
        <select id="hd_select" class="hd_drop_down_box"
                onclick="hd_drop_down_event(this.options[this.selectedIndex].value);">
            <option disabled="disabled" selected="selected">查询类型</option>
            <option value="weekQuery">按周查询</option>
            <option value="monthQuery">按月查询</option>
            <option value="yearQuery">按年查询</option>
            <option value="ownQuery">自定义查询</option>
        </select>
        <div class="dynamicDisplay">
            <div id="hd_part1_1_1" style="display: none;padding-left: 40px">
                <h6 style="display: inline">近</h6>
                <input id="hd_part1_1_1_input" style="display: inline;width: 50px;margin-left: 5px" placeholder='输入数字'/>
                <h6 style="display: inline">&nbsp;周</h6>
            </div>
            <div id="hd_part1_1_2" style="display: none;padding-left: 40px">
                <h6 style="display: inline">近</h6>
                <input id="hd_part1_1_2_input" style="display: inline;width: 50px;margin-left: 5px" placeholder='输入数字'/>
                <h6 style="display: inline">&nbsp;月</h6>
            </div>
            <div id="hd_part1_1_3" style="display: none;padding-left: 40px">
                <h6 style="display: inline">近</h6>
                <input id="hd_part1_1_3_input" style="display: inline;width: 50px;margin-left: 5px" placeholder='输入数字'/>
                <h6 style="display: inline">&nbsp;年</h6>
            </div>

            <div class="dynamicDisplay_detail" id="hd_part1_1_4" style="display:none;">
                <input class="js-datepicker " id="hd_part1_1_4_startTime"
                       name="example-datepicker" placeholder="开始日期" value=""
                       data-date-format="yyyy-mm-dd"
                       style="width: 70px;text-align: center;margin-left: 20px"/>
                <input placeholder="至"
                       style="width: 15px;background-color: #f9fafb;border-left-color:#f9fafb ;border-right-color: #f9fafb;margin-left: 0px"
                       disabled="disabled"/>
                <input class="js-datepicker " id="hd_part1_1_4_endTime"
                       name="example-datepicker" placeholder="结束日期" value="" data-date-format="yyyy-mm-dd"
                       style="width: 70px;text-align: center;margin-left: 0"/>
            </div>
        </div>
        <button class="btn btn-info btn-xs" type="button" onclick="hd_searchAllPart()">查询</button>
    </div>
    <div id="hd_part1_2" style="height: 400px;width: 680px;">

    </div>
</div>


</html>
