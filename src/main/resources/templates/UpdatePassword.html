<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>后端分页</title>
    <link href="/css/icon.css" type="text/css" rel="stylesheet">
    <link href="/css/myStyle.css" type="text/css" rel="stylesheet">
    <link href="/css/myStyle1.css" type="text/css" rel="stylesheet">
    <link href="/css/myStyle2.css" type="text/css" rel="stylesheet">
    <link href="/css/materialdesignicons.min.css" rel="stylesheet">
    <!--时间选择插件-->
    <!--日期选择插件-->
    <link rel="stylesheet" href="/css/bootstrap-datepicker.css">
    <link href="/css/style.min.css" rel="stylesheet">
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script type="text/javascript" src="/js/main.min.js"></script>
    <script type="text/javascript" src="/js/moment.min.js"></script>
    <script type="text/javascript" src="/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/js/echarts.min.js"></script>
    <!--时间选择器-->
    <script type="text/javascript" src="/js/zh-cn.js"></script>
    <!--日期选择器-->
    <script type="text/javascript" src="/js/bootstrap-datepicker.min.js"></script>
    <script type="text/javascript" src="/js/bootstrap-datepicker.zh-CN.min.js"></script>
    <script type="text/javascript" src="/js/jquery.cookie.min.js"></script>
    <script></script>
    <script>
        $(function () {
        });

        function input_clear() {
            $("#input1").val("");
            $("#input2").val("");
        }

        function submitUpdatePassword() {
            var originPassword = $("#input1").val();
            var password = $("#input2").val();
            // var phone = $.cookie('userPhone');
            var userPhone = $.cookie("userPhone");
            // console.log(phone);
            $.ajax({
                url: "/user/updatePassword.do",
                type: "post",
                dataType: "json",
                data: {"originPassword": originPassword, "password": password, "userPhone": userPhone},
                success: function (data) {
                    showResult(data);
                },
                error: function (msg) {
                    alert("ajax连接异常：" + msg);
                }
            });

        }

        function showResult(data) {
            if (data >= 0) {
                window.confirm("修改密码成功!");
            } else {
                window.confirm("修改密码失败，请确认原密码是否正确!");
            }
            var url = '/modifyZoneMessage/queryAll.do';
            var param = {};
            $.get(url, param, function (result) {
                $("#part").html(result);// 将返回的字符串渲染为html
            });
        }
    </script>

</head>
<body>
<div id="part">
    <div class="tms_card1" id="part1">
        <div class="mzmu_div0">
            <div>
                <div class="mzmu_div1">
                    <h6 style="display: inline">旧密码</h6>
                </div>
                <input class="mzmu_input1" id="input1" placeholder="" type="password"/>
            </div>
            <div>
                <div class="mzmu_div2">
                    <h6 style="display: inline">新密码</h6>
                </div>
                <input class="mzmu_input2" id="input2" placeholder="" type="password"/>
            </div>
            <div class="mzmu_div3">
                <button class="btn btn-secondary btn-sm" type="button" onclick="input_clear()"
                        style="margin-left: 150px">重置
                </button>
                <button class="btn btn-info btn-sm" type="button" onclick="submitUpdatePassword()"
                        style="margin-left:200px">提交
                </button>
            </div>
        </div>

    </div>
</div>

</body>
</html>